---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "windows_localuser Resource - windows"
subcategory: ""
description: |-
  Manages a Windows local user account using PowerShell cmdlets.
  This resource allows you to create, update, and delete local user accounts on Windows systems.
  Example Usage
  
  resource "windows_localuser" "admin" {
    username                    = "localadmin"
    password                    = "P@ssw0rd123!"
    full_name                   = "Local Administrator"
    description                 = "Local admin account"
    password_never_expires      = true
    user_cannot_change_password = false
    account_disabled            = false
  }
  
  resource "windows_localuser" "service_account" {
    username                    = "svc_account"
    password                    = "P@ssw0rd123!"
    description                 = "Service account"
    password_never_expires      = true
    user_cannot_change_password = true
    account_disabled            = false
    allow_existing              = true
  }
  
  # Use computed attributes
  output "user_sid" {
    value = windows_localuser.admin.sid
  }
  
  output "password_last_set" {
    value = windows_localuser.admin.password_last_set
  }
---

# windows_localuser (Resource)

Manages a Windows local user account using PowerShell cmdlets.

This resource allows you to create, update, and delete local user accounts on Windows systems.

## Example Usage

```terraform
resource "windows_localuser" "admin" {
  username                    = "localadmin"
  password                    = "P@ssw0rd123!"
  full_name                   = "Local Administrator"
  description                 = "Local admin account"
  password_never_expires      = true
  user_cannot_change_password = false
  account_disabled            = false
}

resource "windows_localuser" "service_account" {
  username                    = "svc_account"
  password                    = "P@ssw0rd123!"
  description                 = "Service account"
  password_never_expires      = true
  user_cannot_change_password = true
  account_disabled            = false
  allow_existing              = true
}

# Use computed attributes
output "user_sid" {
  value = windows_localuser.admin.sid
}

output "password_last_set" {
  value = windows_localuser.admin.password_last_set
}
```

## Example Usage

```terraform
# Basic local user with minimal configuration
resource "windows_localuser" "basic" {
  username = "basicuser"
  password = "P@ssw0rd123!"
}

# Local administrator with full configuration
resource "windows_localuser" "admin" {
  username                    = "localadmin"
  password                    = "SecureP@ssw0rd!2024"
  full_name                   = "Local Administrator"
  description                 = "Local administrator account managed by Terraform"
  password_never_expires      = true
  user_cannot_change_password = false
  account_disabled            = false
}

# Service account with restricted password policy
resource "windows_localuser" "service_account" {
  username                    = "svc_webapp"
  password                    = var.service_account_password
  description                 = "Service account for web application"
  password_never_expires      = true
  user_cannot_change_password = true
  account_disabled            = false
}

# Disabled user account (for future use)
resource "windows_localuser" "disabled_user" {
  username         = "future_user"
  password         = "TempP@ssw0rd!"
  description      = "Account prepared but not yet active"
  account_disabled = true
}

# Temporary user with password expiration
resource "windows_localuser" "temp_user" {
  username                    = "tempuser"
  password                    = "TempP@ss123!"
  full_name                   = "Temporary User"
  description                 = "Temporary user account"
  password_never_expires      = false
  user_cannot_change_password = false
}

# Adopt existing user account
resource "windows_localuser" "existing_user" {
  username       = "existinguser"
  password       = var.existing_user_password
  description    = "Existing user now managed by Terraform"
  allow_existing = true
}

# User with custom command timeout
resource "windows_localuser" "slow_connection" {
  username        = "remoteuser"
  password        = "RemoteP@ss!"
  description     = "User on slow connection"
  command_timeout = 600 # 10 minutes
}

# Multiple users for a team
resource "windows_localuser" "developer" {
  for_each = toset(["dev1", "dev2", "dev3"])

  username                    = each.key
  password                    = var.developer_passwords[each.key]
  description                 = "Developer account for ${each.key}"
  password_never_expires      = false
  user_cannot_change_password = false
}

# User with computed attributes exported
resource "windows_localuser" "monitored_user" {
  username    = "monitoreduser"
  password    = "MonitorP@ss!"
  description = "User with exported attributes"
}

output "monitored_user_info" {
  value = {
    sid              = windows_localuser.monitored_user.sid
    password_last_set = windows_localuser.monitored_user.password_last_set
    password_required = windows_localuser.monitored_user.password_required
  }
  sensitive = false
}

# Backup administrator account
resource "windows_localuser" "backup_admin" {
  username                    = "backup_admin"
  password                    = var.backup_admin_password
  full_name                   = "Backup Administrator"
  description                 = "Emergency backup administrator account"
  password_never_expires      = true
  user_cannot_change_password = true
  account_disabled            = false
  allow_existing              = true
}

# Database service account
resource "windows_localuser" "db_service" {
  username                    = "svc_sqlserver"
  password                    = var.sql_service_password
  full_name                   = "SQL Server Service Account"
  description                 = "Service account for SQL Server"
  password_never_expires      = true
  user_cannot_change_password = true
}

# IIS application pool identity
resource "windows_localuser" "iis_apppool" {
  username                    = "iis_apppool_user"
  password                    = var.iis_password
  description                 = "IIS Application Pool Identity"
  password_never_expires      = true
  user_cannot_change_password = true
  account_disabled            = false
}

# Test user account
resource "windows_localuser" "test_user" {
  username    = "testuser"
  password    = "TestP@ssw0rd!"
  description = "Test user account"

  lifecycle {
    ignore_changes = [password]
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `password` (String, Sensitive) The password for the local user account. The password must meet Windows password complexity requirements.
- `username` (String) The name of the local user account. Cannot be changed after creation. Must be 1-20 characters.

### Optional

- `account_disabled` (Boolean) If true, the account will be disabled. Default is false.
- `allow_existing` (Boolean) If true, allows adopting an already existing user. If false, fails if the user already exists. Default is false.
- `command_timeout` (Number) Timeout in seconds for PowerShell commands. Default is 300 seconds (5 minutes).
- `description` (String) A description for the user account. Optional, can be empty.
- `full_name` (String) The full name of the user. Optional, can be empty.
- `password_never_expires` (Boolean) If true, the password will never expire. Default is false.
- `user_cannot_change_password` (Boolean) If true, the user cannot change their password. Default is false.

### Read-Only

- `id` (String) Unique identifier for the resource (same as username).
- `password_last_set` (String) The date and time when the password was last set, in ISO 8601 format. This is a read-only attribute.
- `password_required` (Boolean) Indicates whether a password is required for this account. This is a read-only attribute.
- `sid` (String) The Security Identifier (SID) of the user account. This is a unique identifier assigned by Windows.

## Import

Import is supported using the following syntax:

The [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import) can be used, for example:

```shell
# Import a basic user
terraform import windows_localuser.basic "basicuser"

# Import local administrator
terraform import windows_localuser.admin "localadmin"

# Import service account
terraform import windows_localuser.service_account "svc_webapp"

# Import disabled user
terraform import windows_localuser.disabled_user "future_user"

# Import temporary user
terraform import windows_localuser.temp_user "tempuser"

# Import existing user
terraform import windows_localuser.existing_user "existinguser"

# Import built-in Administrator account
terraform import windows_localuser.administrator "Administrator"

# Import built-in Guest account
terraform import windows_localuser.guest "Guest"

# Import multiple users using for_each
terraform import 'windows_localuser.developer["dev1"]' "dev1"
terraform import 'windows_localuser.developer["dev2"]' "dev2"
terraform import 'windows_localuser.developer["dev3"]' "dev3"

# Import backup administrator
terraform import windows_localuser.backup_admin "backup_admin"

# Import database service account
terraform import windows_localuser.db_service "svc_sqlserver"

# Import IIS application pool identity
terraform import windows_localuser.iis_apppool "iis_apppool_user"
```
