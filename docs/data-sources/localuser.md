---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "windows_localuser Data Source - windows"
subcategory: ""
description: |-
  Reads comprehensive information about a Windows local user account.
  This data source retrieves detailed information about an existing local user on a Windows system,
  including security identifiers, password policies, and activity timestamps.
  Example Usage
  
  data "windows_localuser" "admin" {
    username = "Administrator"
  }
  
  output "admin_info" {
    value = {
      sid                  = data.windows_localuser.admin.sid
      enabled              = data.windows_localuser.admin.enabled
      password_last_set    = data.windows_localuser.admin.password_last_set
      last_logon           = data.windows_localuser.admin.last_logon
      password_expires     = data.windows_localuser.admin.password_expires
    }
  }
  
  data "windows_localuser" "service_account" {
    username = "svc_account"
  }
  
  output "service_account_description" {
    value = data.windows_localuser.service_account.description
  }
---

# windows_localuser (Data Source)

Reads comprehensive information about a Windows local user account.

This data source retrieves detailed information about an existing local user on a Windows system,
including security identifiers, password policies, and activity timestamps.

## Example Usage

```terraform
data "windows_localuser" "admin" {
  username = "Administrator"
}

output "admin_info" {
  value = {
    sid                  = data.windows_localuser.admin.sid
    enabled              = data.windows_localuser.admin.enabled
    password_last_set    = data.windows_localuser.admin.password_last_set
    last_logon           = data.windows_localuser.admin.last_logon
    password_expires     = data.windows_localuser.admin.password_expires
  }
}

data "windows_localuser" "service_account" {
  username = "svc_account"
}

output "service_account_description" {
  value = data.windows_localuser.service_account.description
}
```

## Example Usage

```terraform
# Read information about a specific local user
data "windows_localuser" "admin" {
  username = "Administrator"
}

# Output user information
output "admin_user_info" {
  value = {
    username          = data.windows_localuser.admin.username
    full_name         = data.windows_localuser.admin.full_name
    description       = data.windows_localuser.admin.description
    sid               = data.windows_localuser.admin.sid
    enabled           = data.windows_localuser.admin.enabled
    password_required = data.windows_localuser.admin.password_required
  }
}

# Check if user exists before operations
data "windows_localuser" "existing_user" {
  username = "existinguser"
}

resource "windows_localgroup" "user_group" {
  count       = data.windows_localuser.existing_user.enabled ? 1 : 0
  name        = "Group_${data.windows_localuser.existing_user.username}"
  description = "Group for ${data.windows_localuser.existing_user.full_name}"
}

# Read multiple users
data "windows_localuser" "admin" {
  username = "Administrator"
}

data "windows_localuser" "guest" {
  username = "Guest"
}

locals {
  system_users = {
    admin = data.windows_localuser.admin.sid
    guest = data.windows_localuser.guest.sid
  }
}

# Check user account status
data "windows_localuser" "service_account" {
  username = "svc_webapp"
}

output "service_account_status" {
  value = {
    exists               = data.windows_localuser.service_account.username != ""
    enabled              = data.windows_localuser.service_account.enabled
    password_expires     = !data.windows_localuser.service_account.password_never_expires
    can_change_password  = !data.windows_localuser.service_account.user_cannot_change_password
    lockout_status       = data.windows_localuser.service_account.lockout_status
  }
}

# Validate user properties before applying changes
data "windows_localuser" "check_user" {
  username = "targetuser"
}

resource "windows_localuser" "update_if_needed" {
  count                       = data.windows_localuser.check_user.enabled ? 1 : 0
  username                    = data.windows_localuser.check_user.username
  password                    = var.user_password
  description                 = "Updated by Terraform"
  password_never_expires      = true
  user_cannot_change_password = true
  allow_existing              = true
}

# Use SID in configurations
data "windows_localuser" "admin_user" {
  username = "Administrator"
}

output "admin_sid" {
  value       = data.windows_localuser.admin_user.sid
  description = "Administrator SID for ACL configurations"
}

# Check password policy compliance
data "windows_localuser" "policy_check" {
  username = "testuser"
}

locals {
  password_policy_compliant = (
    data.windows_localuser.policy_check.password_required &&
    !data.windows_localuser.policy_check.password_expired &&
    data.windows_localuser.policy_check.password_age_days < 90
  )
}

output "password_compliance" {
  value = local.password_policy_compliant
}

# Monitor user account age
data "windows_localuser" "old_account" {
  username = "legacyuser"
}

output "account_age" {
  value = {
    created_days_ago       = data.windows_localuser.old_account.account_age_days
    password_last_set_days = data.windows_localuser.old_account.password_age_days
    last_logon_days        = data.windows_localuser.old_account.last_logon_days_ago
  }
}

# Custom timeout for slow connections
data "windows_localuser" "remote_user" {
  username        = "remoteuser"
  command_timeout = 600
}

# Conditional resource creation based on user state
data "windows_localuser" "temp_user" {
  username = "tempuser"
}

resource "windows_localuser" "create_if_missing" {
  count       = data.windows_localuser.temp_user.username == "" ? 1 : 0
  username    = "tempuser"
  password    = var.temp_password
  description = "Temporary user created by Terraform"
}

# Security audit - list user properties
data "windows_localuser" "audit_user" {
  username = "audituser"
}

output "security_audit" {
  value = {
    username                    = data.windows_localuser.audit_user.username
    enabled                     = data.windows_localuser.audit_user.enabled
    password_never_expires      = data.windows_localuser.audit_user.password_never_expires
    user_cannot_change_password = data.windows_localuser.audit_user.user_cannot_change_password
    lockout_status              = data.windows_localuser.audit_user.lockout_status
    password_expired            = data.windows_localuser.audit_user.password_expired
    sid                         = data.windows_localuser.audit_user.sid
  }
  sensitive = false
}

# Compare user configurations
data "windows_localuser" "user1" {
  username = "user1"
}

data "windows_localuser" "user2" {
  username = "user2"
}

locals {
  users_have_same_policy = (
    data.windows_localuser.user1.password_never_expires == data.windows_localuser.user2.password_never_expires &&
    data.windows_localuser.user1.user_cannot_change_password == data.windows_localuser.user2.user_cannot_change_password
  )
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `username` (String) The name of the local user account to look up.

### Optional

- `command_timeout` (Number) Timeout in seconds for PowerShell commands. Default is 300 seconds (5 minutes).

### Read-Only

- `account_expires` (String) The date and time when the account will expire, in ISO 8601 format. Empty if account never expires.
- `description` (String) The description of the user account.
- `enabled` (Boolean) Indicates whether the user account is enabled.
- `full_name` (String) The full name of the user.
- `id` (String) Unique identifier for the data source (same as username).
- `last_logon` (String) The date and time of the last logon, in ISO 8601 format. Empty if user has never logged on.
- `object_class` (String) The object class type. Typically 'User' for user accounts.
- `password_changeable_date` (String) The date and time when the password can be changed, in ISO 8601 format. Empty if not applicable.
- `password_expires` (String) The date and time when the password will expire, in ISO 8601 format. Empty if password never expires.
- `password_last_set` (String) The date and time when the password was last set, in ISO 8601 format (e.g., '2026-02-11T20:38:36+01:00'). Empty if never set.
- `password_never_expires` (Boolean) Indicates whether the password never expires.
- `password_required` (Boolean) Indicates whether a password is required for the account.
- `principal_source` (String) The source of the account. Typically 'Local' for local accounts.
- `sid` (String) The Security Identifier (SID) of the user account. This is a unique identifier in the format S-1-5-21-...
- `user_cannot_change_password` (Boolean) Indicates whether the user can change their password.
