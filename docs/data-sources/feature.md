---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "windows_feature Data Source - windows"
subcategory: ""
description: |-
  Retrieves detailed information about a Windows Server feature using the PowerShell Get-WindowsFeature cmdlet.
  This data source provides comprehensive information about Windows features including their installation state, dependencies, and sub-features.
  Example Usage
  
  data "windows_feature" "web_server" {
    name = "Web-Server"
  }
  
  output "web_server_installed" {
    value = data.windows_feature.web_server.installed
  }
  
  output "web_server_subfeatures" {
    value = data.windows_feature.web_server.sub_features
  }
  
  output "web_server_dependencies" {
    value = data.windows_feature.web_server.dependencies
  }
  
  # Conditional resource creation based on feature state
  resource "windows_feature" "web_management" {
    count                    = data.windows_feature.web_server.installed ? 1 : 0
    feature                  = "Web-Mgmt-Console"
    include_management_tools = true
  }
---

# windows_feature (Data Source)

Retrieves detailed information about a Windows Server feature using the PowerShell Get-WindowsFeature cmdlet.

This data source provides comprehensive information about Windows features including their installation state, dependencies, and sub-features.

## Example Usage

```terraform
data "windows_feature" "web_server" {
  name = "Web-Server"
}

output "web_server_installed" {
  value = data.windows_feature.web_server.installed
}

output "web_server_subfeatures" {
  value = data.windows_feature.web_server.sub_features
}

output "web_server_dependencies" {
  value = data.windows_feature.web_server.dependencies
}

# Conditional resource creation based on feature state
resource "windows_feature" "web_management" {
  count                    = data.windows_feature.web_server.installed ? 1 : 0
  feature                  = "Web-Mgmt-Console"
  include_management_tools = true
}
```

## Example Usage

```terraform
# Read information about a specific Windows feature
data "windows_feature" "web_server" {
  feature = "Web-Server"
}

# Output feature information
output "web_server_info" {
  value = {
    name               = data.windows_feature.web_server.display_name
    installed          = data.windows_feature.web_server.installed
    install_state      = data.windows_feature.web_server.install_state
    feature_type       = data.windows_feature.web_server.feature_type
    restart_needed     = data.windows_feature.web_server.restart_needed
    sub_features_count = length(data.windows_feature.web_server.sub_features)
  }
}

# Check if a feature is installed before creating a resource
data "windows_feature" "hyperv" {
  feature = "Hyper-V"
}

resource "windows_feature" "hyperv_management" {
  count   = data.windows_feature.hyperv.installed ? 1 : 0
  feature = "Hyper-V-Tools"
}

# Read multiple features
data "windows_feature" "ad_domain_services" {
  feature = "AD-Domain-Services"
}

data "windows_feature" "dns" {
  feature = "DNS"
}

data "windows_feature" "dhcp" {
  feature = "DHCP"
}

# Conditional logic based on feature state
locals {
  web_server_ready = (
    data.windows_feature.web_server.installed &&
    data.windows_feature.web_server.install_state == "Installed" &&
    !data.windows_feature.web_server.restart_needed
  )
}

output "web_server_status" {
  value = local.web_server_ready ? "Ready" : "Not Ready"
}

# Check feature dependencies
data "windows_feature" "iis_base" {
  feature = "Web-Server"
}

data "windows_feature" "iis_asp_net" {
  feature = "Web-Asp-Net45"
}

output "iis_asp_net_available" {
  value = data.windows_feature.iis_asp_net.installed || data.windows_feature.iis_base.installed
}

# Read feature with custom timeout
data "windows_feature" "slow_connection" {
  feature         = "FS-Resource-Manager"
  command_timeout = 600
}

# Get all sub-features information
data "windows_feature" "rds" {
  feature = "RDS-RD-Server"
}

output "rds_sub_features" {
  value = data.windows_feature.rds.sub_features
}

# Verify feature before installation
data "windows_feature" "target_feature" {
  feature = "Web-Mgmt-Console"
}

resource "windows_feature" "install_if_not_present" {
  count                    = !data.windows_feature.target_feature.installed ? 1 : 0
  feature                  = data.windows_feature.target_feature.feature
  include_management_tools = true
}

# Check feature type before operations
data "windows_feature" "file_services" {
  feature = "FS-FileServer"
}

output "is_role" {
  value = data.windows_feature.file_services.feature_type == "Role"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) The name of the Windows feature to query (e.g., 'Web-Server', 'RSAT-ADDS').

### Read-Only

- `additional_info` (Map of String) Additional metadata about the feature (MajorVersion, MinorVersion, NumericId, InstallName).
- `best_practices_model_id` (String) The Best Practices Analyzer model ID for this feature.
- `dependencies` (List of String) List of features that this feature depends on. These are the prerequisite features required for installation.
- `depth` (Number) The depth level of the feature in the hierarchy tree.
- `description` (String) The description of the Windows feature.
- `display_name` (String) The display name of the Windows feature.
- `event_query` (String) The event query string associated with the feature.
- `feature_type` (String) The type of the feature (e.g., 'Role', 'Role Service', 'Feature').
- `id` (String) Unique identifier for the data source (same as feature name).
- `install_state` (String) The current installation state of the feature. Possible values: 'Installed', 'Available', 'Removed', 'Unknown'.
- `installed` (Boolean) Whether the feature is currently installed.
- `notification` (List of String) List of notifications related to the feature.
- `parent` (String) The parent feature name if this is a sub-feature.
- `path` (String) The hierarchical path of the feature in the Windows Server feature tree.
- `post_configuration_needed` (Boolean) Indicates whether post-installation configuration is required.
- `server_component_descriptor` (String) The server component descriptor for the feature (JSON string).
- `sub_features` (List of String) List of sub-features that can be installed with this feature.
- `system_service` (List of String) List of system services associated with this feature.
